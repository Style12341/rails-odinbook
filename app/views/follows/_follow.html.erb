<%# follow variable contains the user that could be a follower or a followee %>
<div class="follow-container">
  <div class="follow">
    <div class="follow-avatar">
      <%# image_tag follow.avatar_url, alt: follow.username %>
    </div>
    <div class="follow-username">
      <%= link_to follow.name, user_path(follow),data: { turbo_frame: "_top" } %>
    </div>
    <div class="follow-actions">
      <% if @user == current_user %>
        <% if current_user.following?(follow) %>
          <%= button_to (follower ? "Delete follow" : "Unfollow"), follow_path(follow), method: :delete, class: "btn btn-danger" %>
        <% else %>
          <% if pending_request %>
            <%= button_to "Cancel Request",
                cancel_follow_request_user_path(follow),
                method: :delete, class: "btn btn-primary" %>
          <% else %>
            <%= button_to "Request follow",
                follow_requests_path(follow),
                method: :post, class: "btn btn-primary" %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>